import{jsxs as m}from"react/jsx-runtime";import*as r from"node:fs";import{createFileRoute as p,lazyRouteComponent as d,useRouter as l}from"@tanstack/react-router";import{createServerFn as o}from"@tanstack/start-client-core";import{c as n}from"./index-ujMS-7Qz.js";import"tiny-invariant";const _=()=>Promise.resolve().then(()=>F),f="count.txt";async function h(){return Number.parseInt(await r.promises.readFile(f,"utf-8").catch(()=>"0"))}const v=n("src_routes_index_tsx--getCount_createServerFn_handler","/_server",(e,t)=>a.__executeServer(e,t)),a=o({method:"GET"}).handler(v,()=>h()),c=p("/")({component:d(_,"component",()=>c.ssr),loader:async()=>await a()}),s="count.txt";async function C(){return Number.parseInt(await r.promises.readFile(s,"utf-8").catch(()=>"0"))}const S=n("src_routes_index_tsx--updateCount_createServerFn_handler","/_server",(e,t)=>u.__executeServer(e,t)),u=o({method:"POST"}).validator(e=>e).handler(S,async({data:e})=>{const t=await C();await r.promises.writeFile(s,`${t+e}`)}),x=function(){const t=l(),i=c.useLoaderData();return m("button",{type:"button",onClick:()=>{u({data:1}).then(()=>{t.invalidate()})},children:["Add 1 to ",i,"?"]})},F=Object.freeze(Object.defineProperty({__proto__:null,component:x},Symbol.toStringTag,{value:"Module"}));export{x as component};
